<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asset Manager Pro - Professional Inventory System</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            scroll-behavior: smooth;
        }

        html:not(.dark) {
            background-color: #f8fafc;
            color: #0f172a;
        }

        html.dark {
            background-color: #0d1117;
            color: #e6edf3;
        }

        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: background-color 0.2s ease, color 0.2s ease;
            overflow-x: hidden;
        }

        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        html.dark ::-webkit-scrollbar-thumb {
            background: #30363d;
        }

        html.dark ::-webkit-scrollbar-thumb:hover {
            background: #484f58;
        }

        .hidden {
            display: none !important;
        }

        .auth-screen {
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .auth-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 400px;
            padding: 40px;
        }

        html.dark .auth-container {
            background: #161b22;
            color: #e6edf3;
        }

        .auth-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .auth-subtitle {
            color: #64748b;
            font-size: 14px;
            margin-bottom: 28px;
        }

        html.dark .auth-subtitle {
            color: #8b949e;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 6px;
            color: #334155;
        }

        html.dark .form-group label {
            color: #c9d1d9;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 14px;
            font-family: inherit;
            transition: border-color 0.2s ease;
        }

        html.dark .form-group input,
        html.dark .form-group select {
            background: #0d1117;
            border-color: #30363d;
            color: #e6edf3;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            padding: 10px 16px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: inherit;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 100%;
            margin-top: 8px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #334155;
        }

        html.dark .btn-secondary {
            background: #30363d;
            color: #c9d1d9;
        }

        .btn-secondary:hover {
            background: #cbd5e1;
        }

        html.dark .btn-secondary:hover {
            background: #484f58;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
            border-radius: 4px;
        }

        .btn-icon {
            padding: 8px 12px;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .text-center {
            text-align: center;
        }

        .text-muted {
            color: #64748b;
            font-size: 13px;
        }

        html.dark .text-muted {
            color: #8b949e;
        }

        .text-link {
            color: #667eea;
            cursor: pointer;
            font-weight: 600;
        }

        .text-link:hover {
            text-decoration: underline;
        }

        .main-container {
            display: flex;
            flex: 1;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }

        .sidebar {
            width: 280px;
            background: white;
            border-right: 1px solid #e2e8f0;
            display: flex;
            flex-direction: column;
            padding: 24px 0;
            overflow-y: auto;
        }

        html.dark .sidebar {
            background: #161b22;
            border-right-color: #30363d;
        }

        .sidebar-header {
            padding: 0 20px;
            margin-bottom: 24px;
        }

        .sidebar-title {
            font-size: 18px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 4px;
        }

        .sidebar-subtitle {
            color: #64748b;
            font-size: 12px;
        }

        html.dark .sidebar-subtitle {
            color: #8b949e;
        }

        .sidebar-menu {
            list-style: none;
            flex: 1;
        }

        .sidebar-menu-item {
            padding: 0;
            margin: 0;
        }

        .sidebar-menu-item a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            color: #64748b;
            text-decoration: none;
            transition: all 0.2s ease;
            cursor: pointer;
            border-left: 3px solid transparent;
            font-size: 14px;
        }

        html.dark .sidebar-menu-item a {
            color: #8b949e;
        }

        .sidebar-menu-item a:hover {
            background: #f1f5f9;
            color: #334155;
            border-left-color: #667eea;
        }

        html.dark .sidebar-menu-item a:hover {
            background: #21262d;
            color: #c9d1d9;
            border-left-color: #667eea;
        }

        .sidebar-menu-item a.active {
            background: #f1f5f9;
            color: #667eea;
            border-left-color: #667eea;
            font-weight: 600;
        }

        html.dark .sidebar-menu-item a.active {
            background: #21262d;
            color: #58a6ff;
            border-left-color: #58a6ff;
        }

        .sidebar-section-title {
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #94a3b8;
            padding: 16px 20px 8px;
            margin-top: 12px;
        }

        html.dark .sidebar-section-title {
            color: #6e7681;
        }

        .sidebar-footer {
            border-top: 1px solid #e2e8f0;
            padding: 16px 20px;
            display: flex;
            gap: 8px;
        }

        html.dark .sidebar-footer {
            border-top-color: #30363d;
        }

        .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .header {
            background: white;
            border-bottom: 1px solid #e2e8f0;
            padding: 16px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        html.dark .header {
            background: #161b22;
            border-bottom-color: #30363d;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .header-title {
            font-size: 20px;
            font-weight: 700;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 6px;
            transition: background 0.2s ease;
        }

        .user-profile:hover {
            background: #f1f5f9;
        }

        html.dark .user-profile:hover {
            background: #21262d;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 14px;
        }

        .user-info {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-size: 13px;
            font-weight: 600;
        }

        .user-email {
            font-size: 11px;
            color: #64748b;
        }

        html.dark .user-email {
            color: #8b949e;
        }

        .content-area {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
        }

        .items-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .items-count {
            font-size: 28px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .items-count-number {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .search-bar {
            display: flex;
            gap: 12px;
        }

        .search-input {
            padding: 10px 16px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 14px;
            width: 250px;
            font-family: inherit;
        }

        html.dark .search-input {
            background: #0d1117;
            border-color: #30363d;
            color: #e6edf3;
        }

        .search-input::placeholder {
            color: #94a3b8;
        }

        html.dark .search-input::placeholder {
            color: #6e7681;
        }

        .table-container {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        html.dark .table-container {
            background: #161b22;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
        }

        html.dark thead {
            background: #0d1117;
            border-bottom-color: #30363d;
        }

        th {
            padding: 16px;
            text-align: left;
            font-weight: 600;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #64748b;
        }

        html.dark th {
            color: #8b949e;
        }

        td {
            padding: 16px;
            border-bottom: 1px solid #e2e8f0;
            font-size: 14px;
        }

        html.dark td {
            border-bottom-color: #30363d;
        }

        tbody tr:hover {
            background: #f8fafc;
        }

        html.dark tbody tr:hover {
            background: #0d1117;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-available {
            background: #dcfce7;
            color: #166534;
        }

        html.dark .status-available {
            background: #0d3c1d;
            color: #3fb950;
        }

        .status-out {
            background: #fed7aa;
            color: #92400e;
        }

        html.dark .status-out {
            background: #3d2817;
            color: #d29922;
        }

        .condition-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }

        .condition-working {
            background: #dcfce7;
            color: #166534;
        }

        html.dark .condition-working {
            background: #0d3c1d;
            color: #3fb950;
        }

        .condition-notworking {
            background: #fecaca;
            color: #991b1b;
        }

        html.dark .condition-notworking {
            background: #3d1010;
            color: #f85149;
        }

        .condition-na {
            background: #e5e7eb;
            color: #374151;
        }

        html.dark .condition-na {
            background: #30363d;
            color: #8b949e;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            width: 32px;
            height: 32px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: all 0.2s ease;
        }

        .action-btn-edit {
            background: #fef3c7;
            color: #92400e;
        }

        .action-btn-edit:hover {
            background: #fde68a;
        }

        html.dark .action-btn-edit {
            background: #3d2817;
            color: #d29922;
        }

        html.dark .action-btn-edit:hover {
            background: #54410e;
        }

        .action-btn-history {
            background: #dbeafe;
            color: #1e40af;
        }

        .action-btn-history:hover {
            background: #bfdbfe;
        }

        html.dark .action-btn-history {
            background: #0d2a47;
            color: #58a6ff;
        }

        html.dark .action-btn-history:hover {
            background: #1f47a3;
        }

        .action-btn-assign {
            background: #d1fae5;
            color: #065f46;
        }

        .action-btn-assign:hover {
            background: #a7f3d0;
        }

        html.dark .action-btn-assign {
            background: #0d3c1d;
            color: #3fb950;
        }

        html.dark .action-btn-assign:hover {
            background: #166a45;
        }

        .action-btn-notify {
            background: #f3e8ff;
            color: #6b21a8;
        }

        .action-btn-notify:hover {
            background: #e9d5ff;
        }

        html.dark .action-btn-notify {
            background: #3d1f47;
            color: #d291f7;
        }

        html.dark .action-btn-notify:hover {
            background: #5a2e6b;
        }

        .action-btn-delete {
            background: #fee2e2;
            color: #991b1b;
        }

        .action-btn-delete:hover {
            background: #fecaca;
        }

        html.dark .action-btn-delete {
            background: #3d1010;
            color: #f85149;
        }

        html.dark .action-btn-delete:hover {
            background: #5a1515;
        }

        .action-btn-add-qty {
            background: #e0e7ff;
            color: #3730a3;
        }

        .action-btn-add-qty:hover {
            background: #c7d2fe;
        }

        html.dark .action-btn-add-qty {
            background: #262e56;
            color: #818cf8;
        }

        html.dark .action-btn-add-qty:hover {
            background: #3a4266;
        }

        .empty-state {
            text-align: center;
            padding: 48px 24px;
            color: #64748b;
        }

        html.dark .empty-state {
            color: #8b949e;
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(4px);
        }

        .modal.hidden {
            display: none;
        }

        .modal-content {
            background: white;
            border-radius: 8px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 32px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalSlideIn 0.3s ease;
        }

        html.dark .modal-content {
            background: #161b22;
            color: #e6edf3;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .modal-body {
            margin-bottom: 24px;
        }

        .modal-footer {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 16px;
        }

        .form-row.full {
            grid-template-columns: 1fr;
        }

        .message {
            padding: 16px;
            border-radius: 6px;
            margin-bottom: 16px;
            display: flex;
            gap: 12px;
            align-items: flex-start;
        }

        .message-success {
            background: #dcfce7;
            color: #166534;
            border: 1px solid #bbf7d0;
        }

        html.dark .message-success {
            background: #0d3c1d;
            color: #3fb950;
            border-color: #238636;
        }

        .message-error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fecaca;
        }

        html.dark .message-error {
            background: #3d1010;
            color: #f85149;
            border-color: #da3633;
        }

        .message-warning {
            background: #fef3c7;
            color: #92400e;
            border: 1px solid #fde68a;
        }

        html.dark .message-warning {
            background: #3d2817;
            color: #d29922;
            border-color: #8b6914;
        }

        .message-icon {
            flex-shrink: 0;
            font-size: 18px;
        }

        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 2000;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .toast {
            padding: 16px 20px;
            border-radius: 6px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 300px;
            animation: toastSlideIn 0.3s ease;
        }

        @keyframes toastSlideIn {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .toast-success {
            background: #dcfce7;
            color: #166534;
            border: 1px solid #bbf7d0;
        }

        html.dark .toast-success {
            background: #0d3c1d;
            color: #3fb950;
            border-color: #238636;
        }

        .toast-error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fecaca;
        }

        html.dark .toast-error {
            background: #3d1010;
            color: #f85149;
            border-color: #da3633;
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            min-width: 180px;
            z-index: 100;
            margin-top: 8px;
        }

        html.dark .dropdown-menu {
            background: #161b22;
            border-color: #30363d;
        }

        .dropdown-menu a,
        .dropdown-menu button {
            display: block;
            width: 100%;
            padding: 12px 16px;
            border: none;
            background: none;
            text-align: left;
            cursor: pointer;
            font-size: 14px;
            color: #334155;
            border-bottom: 1px solid #f1f5f9;
            transition: background 0.2s ease;
            font-family: inherit;
        }

        html.dark .dropdown-menu a,
        html.dark .dropdown-menu button {
            color: #c9d1d9;
            border-bottom-color: #21262d;
        }

        .dropdown-menu a:last-child,
        .dropdown-menu button:last-child {
            border-bottom: none;
        }

        .dropdown-menu a:hover,
        .dropdown-menu button:hover {
            background: #f1f5f9;
        }

        html.dark .dropdown-menu a:hover,
        html.dark .dropdown-menu button:hover {
            background: #21262d;
        }

        .dropdown-menu a.danger,
        .dropdown-menu button.danger {
            color: #dc2626;
        }

        html.dark .dropdown-menu a.danger,
        html.dark .dropdown-menu button.danger {
            color: #f85149;
        }

        .history-item {
            padding: 12px;
            border-bottom: 1px solid #e2e8f0;
            font-size: 13px;
        }

        html.dark .history-item {
            border-bottom-color: #30363d;
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-time {
            color: #94a3b8;
            font-weight: 600;
            margin-bottom: 4px;
        }

        html.dark .history-time {
            color: #6e7681;
        }

        .history-action {
            color: #334155;
        }

        html.dark .history-action {
            color: #c9d1d9;
        }

        .history-person {
            color: #667eea;
            font-weight: 600;
        }

        .no-items-message {
            grid-column: 1 / -1;
            text-align: center;
            padding: 32px;
            color: #94a3b8;
        }

        html.dark .no-items-message {
            color: #6e7681;
        }

        .relative {
            position: relative;
        }

        .members-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 16px;
        }

        .member-card {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 16px;
            transition: all 0.2s ease;
        }

        html.dark .member-card {
            background: #161b22;
            border-color: #30363d;
        }

        .member-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-color: #667eea;
        }

        .member-card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .member-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 16px;
        }

        .member-name {
            font-weight: 600;
            font-size: 15px;
        }

        .member-info {
            color: #64748b;
            font-size: 12px;
            margin-bottom: 8px;
        }

        html.dark .member-info {
            color: #8b949e;
        }

        .member-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .loading-screen {
            position: fixed;
            inset: 0;
            background: #f8fafc;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            flex-direction: column;
            gap: 20px;
        }

        html.dark .loading-screen {
            background: #0d1117;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #e2e8f0;
            border-top-color: #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        html.dark .spinner {
            border-color: #30363d;
            border-top-color: #58a6ff;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid #e2e8f0;
                padding: 12px 0;
            }

            .search-bar {
                flex-direction: column;
            }

            .search-input {
                width: 100%;
            }

            .action-buttons {
                flex-wrap: wrap;
            }

            table {
                font-size: 12px;
            }

            td, th {
                padding: 12px 8px;
            }

            .form-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="spinner"></div>
        <div id="loadingMessage" style="color: #64748b; font-weight: 600;">Loading inventory...</div>
    </div>

    <!-- Auth Screen -->
    <div id="authScreen" class="auth-screen hidden">
        <div class="auth-container">
            <div class="auth-title">üîì Sign In</div>
            <div class="auth-subtitle">Welcome back to Asset Manager</div>
            
            <div class="form-group">
                <label>Email</label>
                <input type="email" id="signinEmail" placeholder="you@example.com">
            </div>

            <div class="form-group">
                <label>Password</label>
                <input type="password" id="signinPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            </div>

            <button class="btn btn-primary" onclick="handleSignin()">üîì Sign In</button>

            <div id="authError" class="message message-error hidden" style="margin-top: 16px;">
                <div class="message-icon">‚úï</div>
                <div id="authErrorText">Invalid email or password</div>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="hidden">
        <div class="main-container">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="sidebar-header">
                    <div class="sidebar-title">üì¶ Inventory</div>
                    <div class="sidebar-subtitle">Management System</div>
                </div>

                <ul class="sidebar-menu">
                    <li class="sidebar-menu-item">
                        <a onclick="switchView('items')" class="active" id="menuViewItems">
                            <span>üì¶</span> View Items
                            <span style="font-size: 11px; color: #94a3b8; margin-left: auto;" id="itemsCountBadge">0</span>
                        </a>
                    </li>
                    <li class="sidebar-menu-item">
                        <a onclick="switchView('consumables')" id="menuViewConsumables">
                            <span>üõ†Ô∏è</span> View Consumables
                            <span style="font-size: 11px; color: #94a3b8; margin-left: auto;" id="consumablesCountBadge">0</span>
                        </a>
                    </li>
                </ul>

                <div class="sidebar-section-title">Management</div>

                <ul class="sidebar-menu">
                    <li class="sidebar-menu-item">
                        <a onclick="switchView('manage')" id="menuManage">
                            <span>‚öôÔ∏è</span> Manage
                        </a>
                    </li>
                    <li class="sidebar-menu-item">
                        <a onclick="switchView('members')" id="menuMembers">
                            <span>üë•</span> Members
                        </a>
                    </li>
                </ul>

                <div class="sidebar-section-title">Account</div>

                <ul class="sidebar-menu">
                    <li class="sidebar-menu-item">
                        <a onclick="switchView('settings')" id="menuSettings">
                            <span>‚öôÔ∏è</span> Settings
                        </a>
                    </li>
                </ul>

                <div class="sidebar-footer">
                    <button class="btn btn-secondary btn-sm" style="flex: 1;" onclick="toggleTheme()">
                        <span id="themeIcon">üåô</span> Theme
                    </button>
                    <button class="btn btn-secondary btn-sm" style="flex: 1;" onclick="handleLogout()">
                        Logout
                    </button>
                </div>
            </div>

            <!-- Main Content -->
            <div class="content">
                <div class="header">
                    <div class="header-left">
                        <div class="header-title" id="pageTitle">üì¶ Inventory Items</div>
                    </div>
                    <div class="header-right">
                        <div class="user-profile" onclick="toggleUserMenu()">
                            <div class="user-avatar" id="userAvatar">A</div>
                            <div class="user-info">
                                <div class="user-name" id="userName">Admin</div>
                                <div class="user-email" id="userEmail">admin@example.com</div>
                            </div>
                        </div>
                        <div id="userMenu" class="dropdown-menu hidden">
                            <button onclick="switchView('settings')">‚öôÔ∏è Settings</button>
                            <button onclick="handleLogout()" class="danger">Logout</button>
                        </div>
                    </div>
                </div>

                <div class="content-area">
                    <!-- Items View -->
                    <div id="itemsView" class="view active">
                        <div class="items-header">
                            <div class="items-count">
                                <span class="items-count-number" id="itemsCountDisplay">0</span>
                                <span>Items</span>
                            </div>
                            <div class="search-bar">
                                <input type="text" class="search-input" id="searchItems" placeholder="Search items...">
                            </div>
                        </div>

                        <div class="table-container">
                            <table id="itemsTable">
                                <thead>
                                    <tr>
                                        <th>Item Name</th>
                                        <th>Serial Number</th>
                                        <th>Holder</th>
                                        <th>Status</th>
                                        <th>Condition</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="itemsTableBody">
                                    <tr>
                                        <td colspan="6" class="no-items-message">No items found</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Consumables View -->
                    <div id="consumablesView" class="view hidden">
                        <div class="items-header">
                            <div class="items-count">
                                <span class="items-count-number" id="consumablesCountDisplay">0</span>
                                <span>Consumables</span>
                            </div>
                            <div class="search-bar">
                                <input type="text" class="search-input" id="searchConsumables" placeholder="Search consumables...">
                            </div>
                        </div>

                        <div class="table-container">
                            <table id="consumablesTable">
                                <thead>
                                    <tr>
                                        <th>Item Name</th>
                                        <th>Part Number</th>
                                        <th>Quantity</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="consumablesTableBody">
                                    <tr>
                                        <td colspan="4" class="no-items-message">No consumables found</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Manage View -->
                    <div id="manageView" class="view hidden">
                        <div class="items-count" style="margin-bottom: 24px;">
                            üìã Manage Inventory
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
                            <div style="background: white; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; cursor: pointer; transition: all 0.2s ease;" class="manage-card" onclick="openAddItemTypeModal()">
                                <div style="font-size: 32px; margin-bottom: 12px;">‚ûï</div>
                                <div style="font-weight: 600; font-size: 16px;">Add Item</div>
                                <div style="color: #64748b; font-size: 13px;">Create new asset or consumable</div>
                            </div>
                        </div>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-top: 32px;">
                            <div style="background: white; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; cursor: pointer; transition: all 0.2s ease;" class="manage-card" onclick="switchView('members')">
                                <div style="font-size: 32px; margin-bottom: 12px;">üë•</div>
                                <div style="font-weight: 600; font-size: 16px;">Manage Members</div>
                                <div style="color: #64748b; font-size: 13px;">Add/edit users</div>
                            </div>
                        </div>
                    </div>

                    <!-- Members View -->
                    <div id="membersView" class="view hidden">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                            <div class="items-count">üë• Members</div>
                            <button class="btn btn-primary" style="width: auto;" onclick="openAddMemberModal()">‚ûï Add Member</button>
                        </div>

                        <div class="members-grid" id="membersGrid">
                            <div class="no-items-message" style="grid-column: 1 / -1;">No members found</div>
                        </div>
                    </div>

                    <!-- Settings View -->
                    <div id="settingsView" class="view hidden">
                        <div class="items-count" style="margin-bottom: 24px;">‚öôÔ∏è Settings</div>

                        <div style="display: grid; gap: 16px;">
                            <div style="background: white; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; cursor: pointer;" onclick="openEditProfileModal()">
                                <div style="font-weight: 600; margin-bottom: 8px;">‚úèÔ∏è Edit Profile</div>
                                <div style="color: #64748b; font-size: 13px;">Update your information</div>
                            </div>

                            <div style="background: white; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; cursor: pointer;" onclick="openChangePasswordModal()">
                                <div style="font-weight: 600; margin-bottom: 8px;">üîê Change Password</div>
                                <div style="color: #64748b; font-size: 13px;">Update your password</div>
                            </div>

                            <div style="background: white; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; cursor: pointer;" onclick="exportToFile()">
                                <div style="font-weight: 600; margin-bottom: 8px;">üì§ Export to File</div>
                                <div style="color: #64748b; font-size: 13px;">Download backup JSON</div>
                            </div>

                            <div style="background: white; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; cursor: pointer;" onclick="syncFromGithub()">
                                <div style="font-weight: 600; margin-bottom: 8px;">‚òÅÔ∏è Sync from GitHub</div>
                                <div style="color: #64748b; font-size: 13px;">Reload data from repository</div>
                            </div>

                            <div style="background: white; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; cursor: pointer;" onclick="handleLogout()">
                                <div style="font-weight: 600; margin-bottom: 8px;">üóëÔ∏è Logout</div>
                                <div style="color: #64748b; font-size: 13px;">Sign out of your account</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals (truncated for space - include all modals from previous code) -->

    <!-- Item Type Selection Modal -->
    <div id="itemTypeModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">‚ûï Add Item</div>
            <div class="modal-body">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                    <div style="background: white; border: 2px solid #e2e8f0; border-radius: 8px; padding: 20px; cursor: pointer; text-align: center; transition: all 0.2s ease;" onclick="openAddAssetModal()" onmouseover="this.style.borderColor='#667eea'" onmouseout="this.style.borderColor='#e2e8f0'">
                        <div style="font-size: 36px; margin-bottom: 12px;">üì¶</div>
                        <div style="font-weight: 600;">Asset Item</div>
                        <div style="color: #64748b; font-size: 12px; margin-top: 8px;">Manage assets with tracking</div>
                    </div>
                    <div style="background: white; border: 2px solid #e2e8f0; border-radius: 8px; padding: 20px; cursor: pointer; text-align: center; transition: all 0.2s ease;" onclick="openAddConsumableModal()" onmouseover="this.style.borderColor='#667eea'" onmouseout="this.style.borderColor='#e2e8f0'">
                        <div style="font-size: 36px; margin-bottom: 12px;">üõ†Ô∏è</div>
                        <div style="font-weight: 600;">Consumable Item</div>
                        <div style="color: #64748b; font-size: 12px; margin-top: 8px;">Track consumables with quantity</div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('itemTypeModal')">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Add Asset Modal -->
    <div id="addAssetModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">‚ûï Add Asset Item</div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Item Name *</label>
                    <input type="text" id="addAssetName" placeholder="Enter item name">
                </div>
                <div class="form-group">
                    <label>Serial Number *</label>
                    <input type="text" id="addAssetSerial" placeholder="Enter serial number">
                </div>
                <div class="form-group">
                    <label>Condition *</label>
                    <select id="addAssetCondition">
                        <option value="">Select condition</option>
                        <option value="Working">‚úì Working</option>
                        <option value="Not Working">‚úó Not Working</option>
                        <option value="N/A">N/A Not Applicable</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('addAssetModal')">Cancel</button>
                <button class="btn btn-primary" style="width: auto;" onclick="addAsset()">Add Asset</button>
            </div>
        </div>
    </div>

    <!-- Add Consumable Modal -->
    <div id="addConsumableModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">‚ûï Add Consumable Item</div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Item Name *</label>
                    <input type="text" id="addConsumableName" placeholder="Enter item name">
                </div>
                <div class="form-group">
                    <label>Part Number *</label>
                    <input type="text" id="addConsumablePartNumber" placeholder="Enter part number">
                </div>
                <div class="form-group">
                    <label>Quantity *</label>
                    <input type="number" id="addConsumableQuantity" placeholder="Enter quantity" min="0">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('addConsumableModal')">Cancel</button>
                <button class="btn btn-primary" style="width: auto;" onclick="addConsumable()">Add Consumable</button>
            </div>
        </div>
    </div>

    <!-- Edit Asset Modal -->
    <div id="editAssetModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">‚úèÔ∏è Edit Asset Item</div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Item Name *</label>
                    <input type="text" id="editAssetName" placeholder="Enter item name">
                </div>
                <div class="form-group">
                    <label>Serial Number *</label>
                    <input type="text" id="editAssetSerial" placeholder="Enter serial number">
                </div>
                <div class="form-group">
                    <label>Condition *</label>
                    <select id="editAssetCondition">
                        <option value="">Select condition</option>
                        <option value="Working">‚úì Working</option>
                        <option value="Not Working">‚úó Not Working</option>
                        <option value="N/A">N/A Not Applicable</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('editAssetModal')">Cancel</button>
                <button class="btn btn-primary" style="width: auto;" onclick="updateAsset()">Update Asset</button>
            </div>
        </div>
    </div>

    <!-- Edit Consumable Modal -->
    <div id="editConsumableModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">‚úèÔ∏è Edit Consumable Item</div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Item Name *</label>
                    <input type="text" id="editConsumableName" placeholder="Enter item name">
                </div>
                <div class="form-group">
                    <label>Part Number *</label>
                    <input type="text" id="editConsumablePartNumber" placeholder="Enter part number">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('editConsumableModal')">Cancel</button>
                <button class="btn btn-primary" style="width: auto;" onclick="updateConsumable()">Update Consumable</button>
            </div>
        </div>
    </div>

    <!-- Add Quantity Modal -->
    <div id="addQuantityModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">‚ûï Add Quantity</div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Item Name</label>
                    <input type="text" id="addQtyItemName" disabled style="background: #f1f5f9; cursor: not-allowed;">
                </div>
                <div class="form-group">
                    <label>Current Quantity</label>
                    <input type="text" id="addQtyCurrentQty" disabled style="background: #f1f5f9; cursor: not-allowed;">
                </div>
                <div class="form-group">
                    <label>Quantity to Add *</label>
                    <input type="number" id="addQtyAmount" placeholder="Enter quantity to add" min="1">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('addQuantityModal')">Cancel</button>
                <button class="btn btn-primary" style="width: auto;" onclick="confirmAddQuantity()">Add Quantity</button>
            </div>
        </div>
    </div>

    <!-- Assign Consumable Modal -->
    <div id="assignConsumableModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">üì§ Assign Consumable Item</div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Item Name</label>
                    <input type="text" id="assignConsItemName" disabled style="background: #f1f5f9; cursor: not-allowed;">
                </div>
                <div class="form-group">
                    <label>Available Quantity</label>
                    <input type="text" id="assignConsAvailableQty" disabled style="background: #f1f5f9; cursor: not-allowed;">
                </div>
                <div class="form-group">
                    <label>Select Member *</label>
                    <select id="assignConsMember">
                        <option value="">Choose member</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Quantity to Assign *</label>
                    <input type="number" id="assignConsQuantity" placeholder="Enter quantity" min="1">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('assignConsumableModal')">Cancel</button>
                <button class="btn btn-primary" style="width: auto;" onclick="confirmAssignConsumable()">Assign</button>
            </div>
        </div>
    </div>

    <!-- Assign Asset Modal -->
    <div id="assignAssetModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">üì§ Assign Asset Item</div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Item Name</label>
                    <input type="text" id="assignAssetItemName" disabled style="background: #f1f5f9; cursor: not-allowed;">
                </div>
                <div class="form-group">
                    <label>Select Member *</label>
                    <select id="assignAssetMember">
                        <option value="">Choose member</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('assignAssetModal')">Cancel</button>
                <button class="btn btn-primary" style="width: auto;" onclick="confirmAssignAsset()">Assign</button>
            </div>
        </div>
    </div>

    <!-- Item History Modal -->
    <div id="itemHistoryModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">üìú Item History</div>
            <div class="modal-body" id="itemHistoryContent">
                <!-- Dynamically populated -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('itemHistoryModal')">Close</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteConfirmModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">üóëÔ∏è Delete Item?</div>
            <div class="modal-body">
                <div class="message message-warning">
                    <div class="message-icon">‚ö†Ô∏è</div>
                    <div>This action cannot be undone.</div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('deleteConfirmModal')">Cancel</button>
                <button class="btn btn-primary" style="width: auto; background: #ef4444;" onclick="confirmDelete()">Delete</button>
            </div>
        </div>
    </div>

    <!-- Add Member Modal -->
    <div id="addMemberModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">üë§ Add Member</div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Full Name *</label>
                    <input type="text" id="memberName" placeholder="Enter full name">
                </div>
                <div class="form-group">
                    <label>Email *</label>
                    <input type="email" id="memberEmail" placeholder="Enter email">
                </div>
                <div class="form-group">
                    <label>Mobile</label>
                    <input type="tel" id="memberMobile" placeholder="Enter mobile number">
                </div>
                <div class="form-group">
                    <label>Designation</label>
                    <input type="text" id="memberDesignation" placeholder="Enter designation">
                </div>
                <div class="form-group">
                    <label>Department</label>
                    <input type="text" id="memberDepartment" placeholder="Enter department">
                </div>
                <div class="form-group">
                    <label>Password * (Min 6)</label>
                    <input type="password" id="memberPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <div class="form-group">
                    <label>Confirm Password *</label>
                    <input type="password" id="memberConfirmPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('addMemberModal')">Cancel</button>
                <button class="btn btn-primary" style="width: auto;" onclick="addMember()">Add Member</button>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div id="editProfileModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">‚úèÔ∏è Edit Profile</div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" id="editName">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="editEmail">
                </div>
                <div class="form-group">
                    <label>Mobile</label>
                    <input type="tel" id="editMobile">
                </div>
                <div class="form-group">
                    <label>Designation</label>
                    <input type="text" id="editDesignation">
                </div>
                <div class="form-group">
                    <label>Department</label>
                    <input type="text" id="editDepartment">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('editProfileModal')">Cancel</button>
                <button class="btn btn-primary" style="width: auto;" onclick="saveProfile()">Save</button>
            </div>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div id="changePasswordModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">üîê Change Password</div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Current Password *</label>
                    <input type="password" id="currentPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <div class="form-group">
                    <label>New Password *</label>
                    <input type="password" id="newPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <div class="form-group">
                    <label>Confirm Password *</label>
                    <input type="password" id="confirmNewPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('changePasswordModal')">Cancel</button>
                <button class="btn btn-primary" style="width: auto;" onclick="updatePassword()">Update</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script>
        // ================== GITHUB CONFIGURATION ==================
        const GITHUB_DB_USERNAME = 'riyasma07'; // Replace with your GitHub username
        const GITHUB_DB_REPO = 'asset-manager-db'; // Your database repo
        const GITHUB_DB_BRANCH = 'main'; // Branch name
        const GITHUB_DB_TOKEN = 'ghp_your_token_here'; // Replace with your GitHub Personal Access Token
        const DATA_JSON_URL = `https://raw.githubusercontent.com/${GITHUB_DB_USERNAME}/${GITHUB_DB_REPO}/${GITHUB_DB_BRANCH}/data.json?v=${Date.now()}`;

        // ================== GLOBAL STATE ==================
        let currentUser = null;
        let items = [];
        let consumables = [];
        let members = [];
        let allUsers = []; // Store all users (admin + members) for login
        let currentEditingItemId = null;
        let currentEditingConsumableId = null;
        let currentDeleteItemId = null;
        let currentDeleteItemType = null;

        // ================== INITIALIZATION ==================
        async function initApp() {
            try {
                document.getElementById('loadingMessage').textContent = 'Loading data from GitHub...';
                await loadDataFromGithub();
                
                if (currentUser) {
                    hideLoadingScreen();
                    showMainApp();
                    renderItems();
                    renderConsumables();
                    renderMembers();
                    updateUserProfile();
                } else {
                    hideLoadingScreen();
                    showAuthScreen();
                }

                setupEventListeners();
                applyTheme();
            } catch (error) {
                console.error('Initialization error:', error);
                hideLoadingScreen();
                showToast('error', 'Failed to load data. Please refresh the page.');
            }
        }

        function hideLoadingScreen() {
            document.getElementById('loadingScreen').style.display = 'none';
        }

        function setupEventListeners() {
            document.getElementById('searchItems').addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase();
                const rows = document.querySelectorAll('#itemsTableBody tr');
                rows.forEach(row => {
                    const text = row.textContent.toLowerCase();
                    row.style.display = text.includes(query) ? '' : 'none';
                });
            });

            document.getElementById('searchConsumables').addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase();
                const rows = document.querySelectorAll('#consumablesTableBody tr');
                rows.forEach(row => {
                    const text = row.textContent.toLowerCase();
                    row.style.display = text.includes(query) ? '' : 'none';
                });
            });
        }

        // ================== GITHUB DATA LOADING ==================
        async function loadDataFromGithub() {
            try {
                const response = await fetch(DATA_JSON_URL);
                if (!response.ok) {
                    throw new Error(`Failed to fetch: ${response.status}`);
                }

                const data = await response.json();
                
                if (data.user) {
                    currentUser = data.user; // Store admin user if already logged in before
                }

                if (data.items) {
                    items = data.items;
                }

                if (data.consumables) {
                    consumables = data.consumables;
                }

                if (data.members) {
                    members = data.members;
                }

                // Prepare all users for login (admin + members)
                allUsers = [];
                if (data.user) {
                    allUsers.push(data.user);
                }
                if (data.members) {
                    allUsers.push(...data.members);
                }

                console.log('Data loaded successfully from GitHub');
                return data;
            } catch (error) {
                console.error('Error loading from GitHub:', error);
                throw error;
            }
        }

        async function syncFromGithub() {
            try {
                showToast('info', 'Syncing data from GitHub...');
                await loadDataFromGithub();
                await renderItems();
                await renderConsumables();
                await renderMembers();
                showToast('success', 'Data synced successfully!');
            } catch (error) {
                console.error('Sync error:', error);
                showToast('error', 'Failed to sync data from GitHub');
            }
        }

        // ================== AUTH FUNCTIONS ==================
        function handleSignin() {
            const email = document.getElementById('signinEmail').value.trim();
            const password = document.getElementById('signinPassword').value;

            if (!email || !password) {
                showAuthError('Please enter email and password');
                return;
            }

            // Find user in all users array
            const user = allUsers.find(u => u.email === email && u.password === password);

            if (!user) {
                showAuthError('Invalid email or password');
                return;
            }

            currentUser = user;
            saveDataToLocalStorage();
            hideLoadingScreen();
            showMainApp();
            renderItems();
            renderConsumables();
            renderMembers();
            updateUserProfile();
            showToast('success', 'Signed in successfully!');
        }

        function showAuthError(message) {
            const errorEl = document.getElementById('authError');
            const errorTextEl = document.getElementById('authErrorText');
            errorTextEl.textContent = message;
            errorEl.classList.remove('hidden');
        }

        function handleLogout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            showAuthScreen();
            document.getElementById('signinEmail').value = '';
            document.getElementById('signinPassword').value = '';
            document.getElementById('authError').classList.add('hidden');
            showToast('success', 'Logged out successfully!');
        }

        // ================== UI STATE FUNCTIONS ==================
        function showAuthScreen() {
            document.getElementById('authScreen').classList.remove('hidden');
            document.getElementById('mainApp').classList.add('hidden');
        }

        function showMainApp() {
            document.getElementById('authScreen').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
        }

        function switchView(viewName) {
            // Hide all views
            document.querySelectorAll('.view').forEach(v => v.classList.add('hidden'));
            document.querySelectorAll('.sidebar-menu-item a').forEach(a => a.classList.remove('active'));

            // Show selected view
            const viewElement = document.getElementById(viewName + 'View');
            if (viewElement) {
                viewElement.classList.remove('hidden');
            }

            // Update menu
            const menuId = {
                'items': 'menuViewItems',
                'consumables': 'menuViewConsumables',
                'manage': 'menuManage',
                'members': 'menuMembers',
                'settings': 'menuSettings'
            }[viewName];

            if (menuId) {
                document.getElementById(menuId).classList.add('active');
            }

            // Update page title
            const titles = {
                'items': 'üì¶ Inventory Items',
                'consumables': 'üõ†Ô∏è Consumable Items',
                'manage': '‚öôÔ∏è Manage Inventory',
                'members': 'üë• Members',
                'settings': '‚öôÔ∏è Settings'
            };

            document.getElementById('pageTitle').textContent = titles[viewName] || 'Inventory';
        }

        function toggleUserMenu() {
            const menu = document.getElementById('userMenu');
            menu.classList.toggle('hidden');
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.user-profile') && !e.target.closest('#userMenu')) {
                    menu.classList.add('hidden');
                }
            });
        }

        function updateUserProfile() {
            if (currentUser) {
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('userEmail').textContent = currentUser.email;
                const initials = currentUser.name.split(' ').map(n => n[0]).join('').toUpperCase();
                document.getElementById('userAvatar').textContent = initials;
            }
        }

        // ================== MODAL FUNCTIONS ==================
        function openModal(modalId) {
            document.getElementById(modalId).classList.remove('hidden');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }

        function openAddItemTypeModal() {
            openModal('itemTypeModal');
        }

        function openAddAssetModal() {
            closeModal('itemTypeModal');
            openModal('addAssetModal');
            document.getElementById('addAssetName').value = '';
            document.getElementById('addAssetSerial').value = '';
            document.getElementById('addAssetCondition').value = '';
        }

        function openAddConsumableModal() {
            closeModal('itemTypeModal');
            openModal('addConsumableModal');
            document.getElementById('addConsumableName').value = '';
            document.getElementById('addConsumablePartNumber').value = '';
            document.getElementById('addConsumableQuantity').value = '';
        }

        function openEditAssetModal(itemId) {
            const item = items.find(i => i.id === itemId);
            if (item) {
                currentEditingItemId = itemId;
                document.getElementById('editAssetName').value = item.name;
                document.getElementById('editAssetSerial').value = item.serial;
                document.getElementById('editAssetCondition').value = item.condition;
                openModal('editAssetModal');
            }
        }

        function openEditConsumableModal(consumableId) {
            const consumable = consumables.find(c => c.id === consumableId);
            if (consumable) {
                currentEditingConsumableId = consumableId;
                document.getElementById('editConsumableName').value = consumable.name;
                document.getElementById('editConsumablePartNumber').value = consumable.partNumber;
                openModal('editConsumableModal');
            }
        }

        function openAddQuantityModal(consumableId) {
            const consumable = consumables.find(c => c.id === consumableId);
            if (consumable) {
                currentEditingConsumableId = consumableId;
                document.getElementById('addQtyItemName').value = consumable.name;
                document.getElementById('addQtyCurrentQty').value = consumable.quantity;
                document.getElementById('addQtyAmount').value = '';
                openModal('addQuantityModal');
            }
        }

        function openAssignAssetModal(itemId) {
            const item = items.find(i => i.id === itemId);
            if (item) {
                currentEditingItemId = itemId;
                document.getElementById('assignAssetItemName').value = item.name;
                populateMemberDropdown('assignAssetMember');
                openModal('assignAssetModal');
            }
        }

        function openAssignConsumableModal(consumableId) {
            const consumable = consumables.find(c => c.id === consumableId);
            if (consumable) {
                currentEditingConsumableId = consumableId;
                document.getElementById('assignConsItemName').value = consumable.name;
                document.getElementById('assignConsAvailableQty').value = consumable.quantity;
                document.getElementById('assignConsQuantity').value = '';
                populateMemberDropdown('assignConsMember');
                openModal('assignConsumableModal');
            }
        }

        function openItemHistoryModal(itemId, itemType) {
            const item = itemType === 'asset' ? items.find(i => i.id === itemId) : consumables.find(c => c.id === itemId);
            if (item && item.history) {
                let historyHtml = '';
                if (item.history.length === 0) {
                    historyHtml = '<div class="text-muted">No history available</div>';
                } else {
                    item.history.forEach(entry => {
                        const date = new Date(entry.timestamp).toLocaleString();
                        historyHtml += `
                            <div class="history-item">
                                <div class="history-time">${date}</div>
                                <div class="history-action">${entry.action} <span class="history-person">${entry.member}</span></div>
                            </div>
                        `;
                    });
                }
                document.getElementById('itemHistoryContent').innerHTML = historyHtml;
                openModal('itemHistoryModal');
            }
        }

        function openDeleteConfirmModal(itemId, itemType) {
            currentDeleteItemId = itemId;
            currentDeleteItemType = itemType;
            openModal('deleteConfirmModal');
        }

        function openAddMemberModal() {
            document.getElementById('memberName').value = '';
            document.getElementById('memberEmail').value = '';
            document.getElementById('memberMobile').value = '';
            document.getElementById('memberDesignation').value = '';
            document.getElementById('memberDepartment').value = '';
            document.getElementById('memberPassword').value = '';
            document.getElementById('memberConfirmPassword').value = '';
            openModal('addMemberModal');
        }

        function openEditProfileModal() {
            if (currentUser) {
                document.getElementById('editName').value = currentUser.name;
                document.getElementById('editEmail').value = currentUser.email;
                document.getElementById('editMobile').value = currentUser.mobile || '';
                document.getElementById('editDesignation').value = currentUser.designation || '';
                document.getElementById('editDepartment').value = currentUser.department || '';
            }
            openModal('editProfileModal');
        }

        function openChangePasswordModal() {
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmNewPassword').value = '';
            openModal('changePasswordModal');
        }

        // ================== ASSET FUNCTIONS ==================
        async function addAsset() {
            const name = document.getElementById('addAssetName').value.trim();
            const serial = document.getElementById('addAssetSerial').value.trim();
            const condition = document.getElementById('addAssetCondition').value;

            if (!name || !serial || !condition) {
                showToast('error', 'Please fill in all required fields');
                return;
            }

            const newAsset = {
                id: Date.now(),
                name,
                serial,
                condition,
                status: 'Available',
                holder: '-',
                history: [{
                    timestamp: new Date().toISOString(),
                    action: 'Added to inventory',
                    member: currentUser.name
                }],
                createdAt: new Date().toISOString()
            };

            items.push(newAsset);
            saveDataToLocalStorage();
            closeModal('addAssetModal');
            await renderItems();
            showToast('success', 'Asset added successfully!');
        }

        async function updateAsset() {
            const name = document.getElementById('editAssetName').value.trim();
            const serial = document.getElementById('editAssetSerial').value.trim();
            const condition = document.getElementById('editAssetCondition').value;

            if (!name || !serial || !condition) {
                showToast('error', 'Please fill in all required fields');
                return;
            }

            const asset = items.find(i => i.id === currentEditingItemId);
            if (asset) {
                asset.name = name;
                asset.serial = serial;
                asset.condition = condition;
                saveDataToLocalStorage();
                closeModal('editAssetModal');
                await renderItems();
                showToast('success', 'Asset updated successfully!');
            }
        }

        async function confirmAssignAsset() {
            const memberId = document.getElementById('assignAssetMember').value;

            if (!memberId) {
                showToast('error', 'Please select a member');
                return;
            }

            const member = members.find(m => m.id == memberId);
            const asset = items.find(i => i.id === currentEditingItemId);

            if (asset && member) {
                asset.status = 'Out';
                asset.holder = member.name;
                asset.history.push({
                    timestamp: new Date().toISOString(),
                    action: 'Assigned to',
                    member: member.name
                });

                // Send notification email
                await sendNotificationEmail(member.email, `Asset Assigned: ${asset.name}`, 
                    `The asset "${asset.name}" (Serial: ${asset.serial}) has been assigned to you.`);

                saveDataToLocalStorage();
                closeModal('assignAssetModal');
                await renderItems();
                showToast('success', 'Asset assigned successfully!');
            }
        }

        async function deleteAsset(itemId) {
            items = items.filter(i => i.id !== itemId);
            saveDataToLocalStorage();
            await renderItems();
            showToast('success', 'Asset deleted successfully!');
        }

        // ================== CONSUMABLE FUNCTIONS ==================
        async function addConsumable() {
            const name = document.getElementById('addConsumableName').value.trim();
            const partNumber = document.getElementById('addConsumablePartNumber').value.trim();
            const quantity = parseInt(document.getElementById('addConsumableQuantity').value);

            if (!name || !partNumber || !quantity || quantity < 0) {
                showToast('error', 'Please fill in all required fields with valid values');
                return;
            }

            const newConsumable = {
                id: Date.now(),
                name,
                partNumber,
                quantity,
                history: [{
                    timestamp: new Date().toISOString(),
                    action: 'Added to inventory',
                    member: currentUser.name
                }],
                createdAt: new Date().toISOString()
            };

            consumables.push(newConsumable);
            saveDataToLocalStorage();
            closeModal('addConsumableModal');
            await renderConsumables();
            showToast('success', 'Consumable added successfully!');
        }

        async function updateConsumable() {
            const name = document.getElementById('editConsumableName').value.trim();
            const partNumber = document.getElementById('editConsumablePartNumber').value.trim();

            if (!name || !partNumber) {
                showToast('error', 'Please fill in all required fields');
                return;
            }

            const consumable = consumables.find(c => c.id === currentEditingConsumableId);
            if (consumable) {
                consumable.name = name;
                consumable.partNumber = partNumber;
                saveDataToLocalStorage();
                closeModal('editConsumableModal');
                await renderConsumables();
                showToast('success', 'Consumable updated successfully!');
            }
        }

        async function confirmAddQuantity() {
            const quantity = parseInt(document.getElementById('addQtyAmount').value);

            if (!quantity || quantity <= 0) {
                showToast('error', 'Please enter a valid quantity');
                return;
            }

            const consumable = consumables.find(c => c.id === currentEditingConsumableId);
            if (consumable) {
                consumable.quantity += quantity;
                consumable.history.push({
                    timestamp: new Date().toISOString(),
                    action: `Added ${quantity} units to inventory`,
                    member: currentUser.name
                });

                saveDataToLocalStorage();
                closeModal('addQuantityModal');
                await renderConsumables();
                showToast('success', `Added ${quantity} units successfully!`);
            }
        }

        async function confirmAssignConsumable() {
            const memberId = document.getElementById('assignConsMember').value;
            const quantity = parseInt(document.getElementById('assignConsQuantity').value);

            if (!memberId) {
                showToast('error', 'Please select a member');
                return;
            }

            if (!quantity || quantity <= 0) {
                showToast('error', 'Please enter a valid quantity');
                return;
            }

            const member = members.find(m => m.id == memberId);
            const consumable = consumables.find(c => c.id === currentEditingConsumableId);

            if (!consumable || consumable.quantity < quantity) {
                showToast('error', 'Insufficient quantity available');
                return;
            }

            if (consumable && member) {
                consumable.quantity -= quantity;
                consumable.history.push({
                    timestamp: new Date().toISOString(),
                    action: `Assigned ${quantity} units to`,
                    member: member.name
                });

                // Send notification email
                await sendNotificationEmail(member.email, 
                    `Consumable Item Assigned: ${consumable.name}`, 
                    `${quantity} units of "${consumable.name}" (Part #: ${consumable.partNumber}) has been given to you.`);

                saveDataToLocalStorage();
                closeModal('assignConsumableModal');
                await renderConsumables();
                showToast('success', 'Consumable assigned successfully!');
            }
        }

        async function deleteConsumable(consumableId) {
            consumables = consumables.filter(c => c.id !== consumableId);
            saveDataToLocalStorage();
            await renderConsumables();
            showToast('success', 'Consumable deleted successfully!');
        }

        // ================== MEMBER FUNCTIONS ==================
        async function addMember() {
            const name = document.getElementById('memberName').value.trim();
            const email = document.getElementById('memberEmail').value.trim();
            const password = document.getElementById('memberPassword').value;
            const confirmPassword = document.getElementById('memberConfirmPassword').value;

            if (!name || !email || !password) {
                showToast('error', 'Please fill in all required fields');
                return;
            }

            if (password !== confirmPassword) {
                showToast('error', 'Passwords do not match');
                return;
            }

            if (password.length < 6) {
                showToast('error', 'Password must be at least 6 characters');
                return;
            }

            if (members.some(m => m.email === email) || (currentUser && currentUser.email === email)) {
                showToast('error', 'Email already exists');
                return;
            }

            const newMember = {
                id: Date.now(),
                name,
                email,
                password,
                mobile: document.getElementById('memberMobile').value.trim(),
                designation: document.getElementById('memberDesignation').value.trim(),
                department: document.getElementById('memberDepartment').value.trim(),
                createdAt: new Date().toISOString()
            };

            members.push(newMember);
            allUsers.push(newMember); // Add to login pool
            saveDataToLocalStorage();
            closeModal('addMemberModal');
            await renderMembers();
            showToast('success', 'Member added successfully!');
        }

        async function deleteMember(memberId) {
            members = members.filter(m => m.id !== memberId);
            allUsers = allUsers.filter(u => u.id !== memberId); // Remove from login pool
            saveDataToLocalStorage();
            await renderMembers();
            showToast('success', 'Member deleted successfully!');
        }

        // ================== PROFILE FUNCTIONS ==================
        async function saveProfile() {
            const name = document.getElementById('editName').value.trim();
            const email = document.getElementById('editEmail').value.trim();

            if (!name || !email) {
                showToast('error', 'Please fill in required fields');
                return;
            }

            if (currentUser) {
                currentUser.name = name;
                currentUser.email = email;
                currentUser.mobile = document.getElementById('editMobile').value.trim();
                currentUser.designation = document.getElementById('editDesignation').value.trim();
                currentUser.department = document.getElementById('editDepartment').value.trim();

                saveDataToLocalStorage();
                closeModal('editProfileModal');
                updateUserProfile();
                showToast('success', 'Profile updated successfully!');
            }
        }

        async function updatePassword() {
            const current = document.getElementById('currentPassword').value;
            const newPass = document.getElementById('newPassword').value;
            const confirmPass = document.getElementById('confirmNewPassword').value;

            if (!current || !newPass || !confirmPass) {
                showToast('error', 'Please fill in all fields');
                return;
            }

            if (currentUser.password !== current) {
                showToast('error', 'Current password is incorrect');
                return;
            }

            if (newPass !== confirmPass) {
                showToast('error', 'New passwords do not match');
                return;
            }

            if (newPass.length < 6) {
                showToast('error', 'Password must be at least 6 characters');
                return;
            }

            currentUser.password = newPass;
            saveDataToLocalStorage();
            closeModal('changePasswordModal');
            showToast('success', 'Password updated successfully!');
        }

        // ================== RENDER FUNCTIONS ==================
        async function renderItems() {
            const tbody = document.getElementById('itemsTableBody');
            const count = document.getElementById('itemsCountDisplay');

            count.textContent = items.length;
            document.getElementById('itemsCountBadge').textContent = items.length;

            if (items.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" class="no-items-message">No items found</td></tr>';
                return;
            }

            tbody.innerHTML = items.map(item => `
                <tr>
                    <td>${item.name}</td>
                    <td>${item.serial}</td>
                    <td>${item.holder}</td>
                    <td><span class="status-badge status-${item.status.toLowerCase()}">${item.status === 'Available' ? '‚úì' : '‚¨§'} ${item.status}</span></td>
                    <td><span class="condition-badge condition-${item.condition.toLowerCase().replace(/\s+/g, '')}">${item.condition === 'Working' ? '‚úì' : item.condition === 'Not Working' ? '‚úó' : '‚Äî'} ${item.condition}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn action-btn-edit" onclick="openEditAssetModal(${item.id})" title="Edit">‚úèÔ∏è</button>
                            <button class="action-btn action-btn-history" onclick="openItemHistoryModal(${item.id}, 'asset')" title="History">üìú</button>
                            <button class="action-btn action-btn-assign" onclick="openAssignAssetModal(${item.id})" title="Assign">üì§</button>
                            <button class="action-btn action-btn-notify" onclick="openItemHistoryModal(${item.id}, 'asset')" title="History">üîî</button>
                            <button class="action-btn action-btn-delete" onclick="openDeleteConfirmModal(${item.id}, 'asset')" title="Delete">üóëÔ∏è</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        async function renderConsumables() {
            const tbody = document.getElementById('consumablesTableBody');
            const count = document.getElementById('consumablesCountDisplay');

            count.textContent = consumables.length;
            document.getElementById('consumablesCountBadge').textContent = consumables.length;

            if (consumables.length === 0) {
                tbody.innerHTML = '<tr><td colspan="4" class="no-items-message">No consumables found</td></tr>';
                return;
            }

            tbody.innerHTML = consumables.map(consumable => `
                <tr>
                    <td>${consumable.name}</td>
                    <td>${consumable.partNumber}</td>
                    <td><strong>${consumable.quantity}</strong></td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn action-btn-edit" onclick="openEditConsumableModal(${consumable.id})" title="Edit">‚úèÔ∏è</button>
                            <button class="action-btn action-btn-history" onclick="openItemHistoryModal(${consumable.id}, 'consumable')" title="History">üìú</button>
                            <button class="action-btn action-btn-add-qty" onclick="openAddQuantityModal(${consumable.id})" title="Add Quantity">‚ûï</button>
                            <button class="action-btn action-btn-assign" onclick="openAssignConsumableModal(${consumable.id})" title="Assign">üì§</button>
                            <button class="action-btn action-btn-notify" onclick="openItemHistoryModal(${consumable.id}, 'consumable')" title="History">üîî</button>
                            <button class="action-btn action-btn-delete" onclick="openDeleteConfirmModal(${consumable.id}, 'consumable')" title="Delete">üóëÔ∏è</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        async function renderMembers() {
            const grid = document.getElementById('membersGrid');

            if (members.length === 0) {
                grid.innerHTML = '<div class="no-items-message" style="grid-column: 1 / -1;">No members found</div>';
                return;
            }

            grid.innerHTML = members.map(member => `
                <div class="member-card">
                    <div class="member-card-header">
                        <div class="member-avatar">${member.name.split(' ').map(n => n[0]).join('').toUpperCase()}</div>
                        <div>
                            <div class="member-name">${member.name}</div>
                            <div class="member-info">${member.designation || 'Member'}</div>
                        </div>
                    </div>
                    <div class="member-info">
                        <strong>Email:</strong> ${member.email}<br>
                        <strong>Mobile:</strong> ${member.mobile || 'N/A'}<br>
                        <strong>Department:</strong> ${member.department || 'N/A'}
                    </div>
                    <div class="member-actions">
                        <button class="btn btn-sm btn-secondary" style="flex: 1;" onclick="deleteMember(${member.id})">Delete</button>
                    </div>
                </div>
            `).join('');
        }

        // ================== HELPER FUNCTIONS ==================
        function populateMemberDropdown(dropdownId) {
            const select = document.getElementById(dropdownId);
            select.innerHTML = '<option value="">Choose member</option>';
            members.forEach(member => {
                select.innerHTML += `<option value="${member.id}">${member.name} (${member.email})</option>`;
            });
        }

        async function confirmDelete() {
            if (currentDeleteItemType === 'asset') {
                await deleteAsset(currentDeleteItemId);
            } else if (currentDeleteItemType === 'consumable') {
                await deleteConsumable(currentDeleteItemId);
            }
            closeModal('deleteConfirmModal');
        }

        async function sendNotificationEmail(email, subject, message) {
            try {
                const response = await fetch('http://localhost:3000/api/send-email', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        email,
                        subject,
                        message
                    })
                });

                if (!response.ok) {
                    const error = await response.json();
                    console.error('Email send error:', error);
                    showToast('warning', 'Item saved but notification email could not be sent');
                }
            } catch (error) {
                console.error('Email send failed:', error);
                showToast('warning', 'Item saved but notification email could not be sent');
            }
        }

        function exportToFile() {
            const data = {
                user: currentUser,
                items,
                consumables,
                members,
                exportedAt: new Date().toISOString()
            };

            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `inventory-backup-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            showToast('success', 'Inventory exported successfully!');
        }

        // ================== THEME FUNCTIONS ==================
        function toggleTheme() {
            const html = document.documentElement;
            html.classList.toggle('dark');
            localStorage.setItem('theme', html.classList.contains('dark') ? 'dark' : 'light');
            applyTheme();
        }

        function applyTheme() {
            const html = document.documentElement;
            const savedTheme = localStorage.getItem('theme') || 'light';
            if (savedTheme === 'dark') {
                html.classList.add('dark');
                document.getElementById('themeIcon').textContent = '‚òÄÔ∏è';
            } else {
                html.classList.remove('dark');
                document.getElementById('themeIcon').textContent = 'üåô';
            }
        }

        // ================== STORAGE FUNCTIONS ==================
        function saveDataToLocalStorage() {
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            localStorage.setItem('items', JSON.stringify(items));
            localStorage.setItem('consumables', JSON.stringify(consumables));
            localStorage.setItem('members', JSON.stringify(members));
        }

        // ================== TOAST FUNCTIONS ==================
        function showToast(type, message) {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            const icons = {
                success: '‚úì',
                error: '‚úï',
                warning: '‚ö†Ô∏è',
                info: '‚ÑπÔ∏è'
            };

            toast.className = `toast toast-${type}`;
            toast.innerHTML = `
                <span class="message-icon">${icons[type]}</span>
                <span>${message}</span>
            `;

            container.appendChild(toast);

            setTimeout(() => {
                toast.style.animation = 'toastSlideIn 0.3s ease reverse';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // ================== INITIALIZATION ==================
        window.addEventListener('DOMContentLoaded', initApp);

        // Close modals on escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal:not(.hidden)').forEach(modal => {
                    modal.classList.add('hidden');
                });
            }
        });

        // Close modals on background click
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.add('hidden');
                }
            });
        });
    </script>
</body>
</html>
